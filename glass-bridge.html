<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Glass Bridge Challenge</title>

<style>
body{
  margin:0;
  font-family: 'Segoe UI', sans-serif;
  background:#020617;
  color:white;
  text-align:center;
}
h1{margin-top:15px}

#hud{
  display:flex;
  justify-content:center;
  gap:20px;
  margin:10px;
  flex-wrap:wrap;
}

.box{
  padding:8px 14px;
  border-radius:8px;
  background:#020617;
  border:1px solid #334155;
  font-size:15px;
}

#timer{color:#facc15}

.bridge{
  display:flex;
  flex-direction:column;
  align-items:center;
  margin-top:15px;
}

.row{
  display:flex;
  gap:25px;
  margin:7px;
}

.glass{
  width:90px;
  height:45px;
  border-radius:8px;
  background:rgba(180,220,255,0.6);
  border:2px solid #7dd3fc;
  cursor:pointer;
  transition:0.3s;
}

.glass:hover{background:rgba(125,211,252,0.9)}
.safe{background:#22c55e !important}
.broken{background:#dc2626 !important;transform:rotate(12deg)}
.disabled{pointer-events:none;opacity:0.6}

button{
  margin-top:12px;
  padding:6px 14px;
  border:none;
  border-radius:6px;
  cursor:pointer;
}

@media(max-width:600px){
  .glass{width:70px;height:38px}
}
</style>
</head>

<body>

<h1>üü¶ Glass Bridge Challenge</h1>

<div id="hud">
  <div class="box" id="timer">‚è±Ô∏è Time: 60</div>
  <div class="box">üèÜ Best: <span id="best">--</span>s</div>
  <div class="box">üìä Last: <span id="last">--</span>s</div>
</div>

<div class="bridge" id="bridge"></div>
<button onclick="resetBest()">Reset Best</button>

<audio id="clickSound" src="https://assets.mixkit.co/active_storage/sfx/2568/2568-preview.mp3"></audio>
<audio id="breakSound" src="https://assets.mixkit.co/active_storage/sfx/2741/2741-preview.mp3"></audio>
<audio id="winSound" src="https://assets.mixkit.co/active_storage/sfx/2019/2019-preview.mp3"></audio>

<script>
const steps = 18;
let current = 0;
let time = 60;
let finished = false;

const bridge = document.getElementById("bridge");
const bestEl = document.getElementById("best");
const lastEl = document.getElementById("last");

const bestTime = localStorage.getItem("bestTime");
if(bestTime) bestEl.innerText = bestTime;

const answers = Array.from({length:steps},()=>Math.floor(Math.random()*2));

function build(){
  bridge.innerHTML="";
  for(let i=0;i<=current;i++){
    const row=document.createElement("div");
    row.className="row";
    for(let j=0;j<2;j++){
      const glass=document.createElement("div");
      glass.className="glass";
      if(i===current){
        glass.onclick=()=>choose(j,glass,row);
      }else glass.classList.add("disabled");
      row.appendChild(glass);
    }
    bridge.appendChild(row);
  }
}

function choose(choice,glass,row){
  row.querySelectorAll(".glass").forEach(g=>g.classList.add("disabled"));
  if(choice===answers[current]){
    glass.classList.add("safe");
    current++;
    if(current===steps){
      win();
    }else setTimeout(build,300);
  }else{
    glass.classList.add("broken");
    gameOver();
  }
}

function win(){
  finished=true;
  document.getElementById("winSound").play();
  const used = 60 - time;
  lastEl.innerText = used;

  if(!bestTime || used < bestTime){
    localStorage.setItem("bestTime",used);
    bestEl.innerText = used;
  }
  setTimeout(()=>alert("üèÜ YOU SURVIVED!"),300);
}

function gameOver(){
  finished=true;
  document.getElementById("breakSound").play();
  lastEl.innerText = "--";
  setTimeout(()=>alert("üí• GAME OVER"),300);
}

const timerInterval=setInterval(()=>{
  if(finished) return;
  time--;
  document.getElementById("timer").innerText="‚è±Ô∏è Time: "+time;
  if(time<=0){
    finished=true;
    alert("‚è∞ TIME UP!");
  }
},1000);

function resetBest(){
  localStorage.removeItem("bestTime");
  bestEl.innerText="--";
}

build();
</script>

</body>
</html>
