<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Glass Bridge Challenge</title>
<style>
body{margin:0;font-family:'Segoe UI',sans-serif;background:#020617;color:white;text-align:center;}
h1{margin-top:15px;}
.play-btn{display:inline-block;margin-top:50px;padding:20px 40px;background:#22c55e;color:black;font-size:22px;font-weight:600;border-radius:12px;cursor:pointer;text-decoration:none;transition:0.3s;}
.play-btn:hover{background:#16a34a;transform:scale(1.05);}
#game-container{display:none;margin-top:30px;}
#hud{display:flex;justify-content:center;gap:20px;margin:10px;flex-wrap:wrap;}
.box{padding:8px 14px;border-radius:8px;background:#020617;border:1px solid #334155;font-size:15px;}
#timer{color:#facc15;}
.bridge-container{display:flex;flex-direction:column;align-items:center;margin-top:15px;position:relative;}
.row{display:flex;gap:25px;margin:7px;}
.glass{width:90px;height:45px;border-radius:8px;background:rgba(180,220,255,0.6);border:2px solid #7dd3fc;cursor:pointer;transition:0.3s;}
.glass:hover{background:rgba(125,211,252,0.9);}
.safe{background:#22c55e !important;}
.broken{background:#dc2626 !important;transform:rotate(12deg);}
.disabled{pointer-events:none;opacity:0.6;}
button{margin-top:12px;padding:6px 14px;border:none;border-radius:6px;cursor:pointer;}
#player{width:40px;height:70px;background:#16a34a;border-radius:6px;position:absolute;left:calc(50% - 20px);top:0px;transition:0.4s;z-index:10;}
#player::before{content:"";width:30px;height:30px;background:#fde68a;border-radius:50%;position:absolute;top:-35px;left:5px;}
@media(max-width:600px){.glass{width:70px;height:38px}#player{width:30px;height:50px;left:calc(50% - 15px);}#player::before{width:25px;height:25px;top:-27px;left:2.5px;}}
</style>
</head>
<body>

<h1>üü¶ Glass Bridge Challenge</h1>
<a class="play-btn" id="startBtn">‚ñ∂ Play Glass Bridge</a>

<div id="game-container">
  <div id="hud">
    <div class="box" id="timer">‚è±Ô∏è Time: 60</div>
    <div class="box">üèÜ Best: <span id="best">--</span>s</div>
    <div class="box">üìä Last: <span id="last">--</span>s</div>
  </div>

  <div class="bridge-container" id="bridgeContainer">
    <div id="player"></div>
    <div class="bridge" id="bridge"></div>
  </div>

  <button onclick="resetBest()">Reset Best</button>
</div>

<audio id="clickSound" src="https://assets.mixkit.co/active_storage/sfx/2568/2568-preview.mp3"></audio>
<audio id="breakSound" src="https://assets.mixkit.co/active_storage/sfx/2741/2741-preview.mp3"></audio>
<audio id="winSound" src="https://assets.mixkit.co/active_storage/sfx/2019/2019-preview.mp3"></audio>

<script>
document.addEventListener("DOMContentLoaded",function(){
let steps=18,current=0,time=60,finished=false;
let bridge,bridgeContainer,player,bestEl,lastEl,timerInterval,bestTime=localStorage.getItem("bestTime"),answers=[];

document.getElementById("startBtn").addEventListener("click",function(){
  document.getElementById("game-container").style.display="block";
  
  bridge=document.getElementById("bridge");
  bridgeContainer=document.getElementById("bridgeContainer");
  player=document.getElementById("player");
  bestEl=document.getElementById("best");
  lastEl=document.getElementById("last");
  
  if(bestTime) bestEl.innerText=bestTime;
  answers=Array.from({length:steps},()=>Math.floor(Math.random()*2));
  current=0;
  finished=false;
  time=60;
  build();
  
  clearInterval(timerInterval);
  timerInterval=setInterval(()=>{
    if(finished)return;
    time--;
    document.getElementById("timer").innerText="‚è±Ô∏è Time: "+time;
    if(time<=0){finished=true;alert("‚è∞ TIME UP!");}
  },1000);
});

function build(){
  bridge.innerHTML="";
  for(let i=0;i<steps;i++){
    const row=document.createElement("div");
    row.className="row";
    for(let j=0;j<2;j++){
      const glass=document.createElement("div");
      glass.className="glass";
      if(i===current){glass.onclick=()=>choose(j,glass,row);}
      else glass.classList.add("disabled");
      row.appendChild(glass);
    }
    bridge.appendChild(row);
  }
  movePlayerToCurrent();
}

function movePlayerToCurrent(){
  const rows=bridge.getElementsByClassName("row");
  if(current<rows.length){
    player.style.top=(rows[current].offsetTop-player.offsetHeight-5)+"px";
  }
}

function choose(choice,glass,row){
  row.querySelectorAll(".glass").forEach(g=>g.classList.add("disabled"));
  document.getElementById("clickSound").play();
  if(choice===answers[current]){
    glass.classList.add("safe");
    current++;
    movePlayerToCurrent();
    if(current===steps) win();
    else setTimeout(build,300);
  }else{
    glass.classList.add("broken");
    player.style.transform+=" rotate(90deg)";
    player.style.opacity="0";
    gameOver();
  }
}

function win(){
  finished=true;
  document.getElementById("winSound").play();
  const used=60-time;
  lastEl.innerText=used;
  if(!bestTime||used<bestTime){localStorage.setItem("bestTime",used);bestEl.innerText=used;bestTime=used;}
  setTimeout(()=>alert("üèÜ YOU SURVIVED!"),300);
}

function gameOver(){
  finished=true;
  document.getElementById("breakSound").play();
  lastEl.innerText="--";
  setTimeout(()=>alert("üí• GAME OVER"),300);
}

window.resetBest=function(){
  localStorage.removeItem("bestTime");
  bestEl.innerText="--";
  bestTime=null;
}
});
</script>
</body>
</html>
